!function(a){"function"==typeof define&&define.amd?define(a):a()}((function(){"use strict";!function(){jQuery((function(a){a(document).ajaxError((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),a(document).ajaxComplete((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),a("form.woocommerce-checkout").on("submit",(async()=>{if(a("form.woocommerce-checkout").serialize().match("payment_method=unuspay_wc_payments")){let{unmount:a}=await DePayWidgets.Loading({text:"Loading payment data..."});setTimeout(a,1e4)}}))}));const a={ethereum:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",bsc:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",polygon:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",solana:"5hqJfrh7SrokFqj16anNqACyUv1PCg7oEqi7oUya1kMQ",fantom:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",gnosis:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",avalanche:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",arbitrum:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",optimism:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb",base:"0x9Db58B260EfAa2d6a94bEb7E219d073dF51cc7Bb"},o=async()=>{if(window.location.hash.startsWith("#wc-unuspay-checkout-")){const o=window.location.hash.match(/wc-unuspay-checkout-(.*?)@/)[1],e=JSON.parse(await wp.apiRequest({path:`/unuspay/wc/checkouts/${o}`,method:"POST"}));if(e.redirect)return void(window.location=e.redirect);let n={accept:e.map((o=>({...o,fee:{amount:"1.5%",receiver:a[o.blockchain]}}))),closed:()=>{window.location.hash="",window.location.reload(!0)},track:{method:a=>new Promise(((e,n)=>{try{wp.apiRequest({path:`/unuspay/wc/checkouts/${o}/track`,method:"POST",data:a}).done((()=>e({status:200}))).fail(((a,o)=>n(o)))}catch(a){n()}})),poll:{method:()=>new Promise(((a,e)=>{wp.apiRequest({path:"/unuspay/wc/release",method:"POST",data:{checkout_id:o}}).done((o=>{a(o)})).fail(a)}))}}};window.UNUSPAY_WC_CURRENCY&&"store"==window.UNUSPAY_WC_CURRENCY.displayCurrency&&function(a){let o,e=a[0],n=1;for(;n<a.length;){const t=a[n],c=a[n+1];if(n+=2,("optionalAccess"===t||"optionalCall"===t)&&null==e)return;"access"===t||"optionalAccess"===t?(o=e,e=c(e)):"call"!==t&&"optionalCall"!==t||(e=c(((...a)=>e.call(o,...a))),o=void 0)}return e}([window,"access",a=>a.UNUSPAY_WC_CURRENCY,"access",a=>a.storeCurrency,"optionalAccess",a=>a.length])&&(n.currency=window.UNUSPAY_WC_CURRENCY.storeCurrency),DePayWidgets.Payment(n)}};document.addEventListener("DOMContentLoaded",o),window.addEventListener("hashchange",o)}()}));
