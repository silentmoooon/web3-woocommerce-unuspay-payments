!function(o){"function"==typeof define&&define.amd?define(o):o()}((function(){"use strict";!function(){jQuery((function(o){o(document).ajaxError((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),o(document).ajaxComplete((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),o("form.woocommerce-checkout").on("submit",(async()=>{if(o("form.woocommerce-checkout").serialize().match("payment_method=unuspay_wc_payments")){let{unmount:o}=await UnusPayWidgets.Loading({text:"Loading payment data..."});setTimeout(o,1e4)}}))}));const o=async()=>{if(window.location.hash.startsWith("#wc-unuspay-checkout-")){const o=window.location.hash.match(/wc-unuspay-checkout-(.*?)@/)[1],t=JSON.parse(await wp.apiRequest({path:`/unuspay/wc/checkouts/${o}`,method:"POST"}));if(t.redirect)return void(window.location=t.redirect);const n=[];t.tokens.forEach((o=>{n.push({blockchain:o.blockchain,amount:o.amount,token:o.tokenAddress,receiver:o.receiveAddress,fee:{amount:o.feeRate+"%",receiver:o.feeAddress}})}));let e={accept:n,closed:()=>{window.location.hash="",window.location.reload(!0)},track:{id:o,endpoint:"/wp-json/unuspay/wc/track",poll:{endpoint:"/wp-json/unuspay/wc/release"}},style:{colors:{}}};t.colorBody&&t.colorBody.colorSwitch&&(t.colorBody.buttonColor&&""!=t.colorBody.buttonColor&&(e.style.colors.primary=t.colorBody.buttonColor),t.colorBody.buttonTextColor&&""!=t.colorBody.buttonTextColor&&(e.style.colors.buttonText=t.colorBody.buttonTextColor),t.colorBody.buttonFont&&""!=t.colorBody.buttonFont&&(e.style.fontFamily=t.colorBody.buttonFont)),UnusPayWidgets.Payment(e)}};document.addEventListener("DOMContentLoaded",o),window.addEventListener("hashchange",o)}()}));
