!function(n){"function"==typeof define&&define.amd?define(n):n()}((function(){"use strict";!function(){jQuery((function(n){n(document).ajaxError((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),n(document).ajaxComplete((function(){"function"==typeof window._depayUnmountLoading&&window._depayUnmountLoading()})),n("form.woocommerce-checkout").on("submit",(async()=>{if(n("form.woocommerce-checkout").serialize().match("payment_method=unuspay_wc_payments")){let{unmount:n}=await UnusPayWidgets.Loading({text:"Loading payment data..."});setTimeout(n,1e4)}}))}));const n=async()=>{if(window.location.hash.startsWith("#wc-unuspay-checkout-")){const n=window.location.hash.match(/wc-unuspay-checkout-(.*?)@/)[1],e=JSON.parse(await wp.apiRequest({path:`/unuspay/wc/checkouts/${n}`,method:"POST"}));if(e.redirect)return void(window.location=e.redirect);const o=[];e.tokens.forEach((n=>{o.push({blockchain:n.blockchain,amount:n.amount,token:n.tokenAddress,receiver:n.receiveAddress,fee:{amount:n.feeRate+"%",receiver:n.feeAddress}})}));let t={accept:o,closed:()=>{window.location.hash="",window.location.reload(!0)},track:{id:n,endpoint:"/wp-json/unuspay/wc/track",poll:{endpoint:"/wp-json/unuspay/wc/release"}}};UnusPayWidgets.Payment(t)}};document.addEventListener("DOMContentLoaded",n),window.addEventListener("hashchange",n)}()}));
